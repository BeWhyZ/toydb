# Tests the ordering of SELECT clauses.

> CREATE TABLE test ( \
    id INT PRIMARY KEY, \
    "bool" BOOLEAN, \
    "float" FLOAT, \
    "int" INT, \
    "string" STRING \
)
> INSERT INTO test VALUES (1, true, 3.14, 7, 'foo')
> INSERT INTO test VALUES (2, false, 2.718, 1, '👍')
> INSERT INTO test VALUES (3, NULL, NULL, NULL, NULL)
---
ok

# This is the only valid order of all clauses:
> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE HAVING TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
ok

# All clauses except SELECT are optional.
> SELECT COUNT(*) WHERE TRUE GROUP BY TRUE HAVING TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
ok

> SELECT COUNT(*) FROM test GROUP BY TRUE HAVING TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
ok

> SELECT COUNT(*) FROM test WHERE TRUE HAVING TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
ok

> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
ok

> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE HAVING TRUE LIMIT 1 OFFSET 1
---
ok

> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE HAVING TRUE ORDER BY TRUE OFFSET 1
---
ok

> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE HAVING TRUE ORDER BY TRUE LIMIT 1
---
3

# The clause order is required. Moving any clause to the next position errors.
!> FROM test SELECT COUNT(*) WHERE TRUE GROUP BY TRUE HAVING TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
Error: invalid input: unexpected token FROM

!> SELECT COUNT(*) FROM test GROUP BY TRUE WHERE TRUE HAVING TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
Error: invalid input: unexpected token WHERE

!> SELECT COUNT(*) FROM test WHERE TRUE HAVING TRUE GROUP BY TRUE ORDER BY TRUE LIMIT 1 OFFSET 1
---
Error: invalid input: unexpected token GROUP

!> SELECT COUNT(*) FROM test WHERE TRUE ORDER BY TRUE GROUP BY TRUE HAVING TRUE LIMIT 1 OFFSET 1
---
Error: invalid input: unexpected token GROUP

!> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE HAVING TRUE LIMIT 1 ORDER BY TRUE OFFSET 1
---
Error: invalid input: unexpected token ORDER

!> SELECT COUNT(*) FROM test WHERE TRUE GROUP BY TRUE HAVING TRUE ORDER BY TRUE OFFSET 1 LIMIT 1 
---
Error: invalid input: unexpected token LIMIT
